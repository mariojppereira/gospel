<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">FAQ | Gospel</title><meta data-react-helmet="true" property="og:title" content="FAQ | Gospel"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ocaml-gospel.github.io/gospel/faq"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="canonical" href="https://ocaml-gospel.github.io/gospel/faq"><link data-react-helmet="true" rel="alternate" href="https://ocaml-gospel.github.io/gospel/faq" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ocaml-gospel.github.io/gospel/faq" hreflang="x-default"><link rel="stylesheet" href="/gospel/assets/css/styles.668f29b1.css">
<link rel="preload" href="/gospel/assets/js/runtime~main.e807e826.js" as="script">
<link rel="preload" href="/gospel/assets/js/main.c6815175.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#ffba00" role="banner"><div class="announcementBarContent_3EUC"><strong>âš  This documentation is still work-in-progress; its contents is unstable.</strong></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/gospel/"><b class="navbar__title">Gospel</b></a><a class="navbar__item navbar__link" href="/gospel/">Docs</a><a class="navbar__item navbar__link" href="/gospel/stdlib">Standard Library</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/gospel/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ocaml-gospel/gospel" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mdx-wrapper mdx-page"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_3qD3"><div class="col col--8"><header><h1>Frequently asked questions</h1></header><p>Your question is not answered here? Feel free to <a href="https://github.com/ocaml-gospel/gospel/discussions/new" target="_blank" rel="noopener noreferrer">open a
discussion</a> so we can
answer it and add it here.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="can-i-use-my-ocaml-functions-in-specifications">Can I use my OCaml functions in specifications?<a aria-hidden="true" class="hash-link" href="#can-i-use-my-ocaml-functions-in-specifications" title="Direct link to heading">â€‹</a></h2><p><strong>Sometimes.</strong> Logic and programs are two separated worlds, and using programs
in our logic can introduce inconsistencies, so you cannot use OCaml values in
your specifications. If you need to write functions as shortcuts in your
specifications, you may want to add <a href="/gospel/language/logical">logical functions or
predicates</a> instead.</p><p>However, some OCaml functions are also safe to use in the specifications. We
call them <em>pure</em>. You can read the <a href="/gospel/language/function-contracts#pure-functions">dedicated documentation
section</a> about pure values to learn
more about them.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="are-formulae-the-same-as-ocaml-boolean-expressions">Are formulae the same as OCaml Boolean expressions?<a aria-hidden="true" class="hash-link" href="#are-formulae-the-same-as-ocaml-boolean-expressions" title="Direct link to heading">â€‹</a></h2><p><strong>No.</strong> We chose a syntax close to OCaml expressions because we believe it makes
it easy for OCaml developers to use Gospel, but Gospel formulae are not OCaml
expressions, and some of them are not even executable or decidable.</p><p>The following specification is not executable, as you cannot test a property on
every possible array:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> total_weight </span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> weight</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token type-variable function" style="color:rgb(153, 76, 195);font-style:italic">&#x27;a</span><span class="token plain"> array </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token type-variable function" style="color:rgb(153, 76, 195);font-style:italic">&#x27;a</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> list </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ y = total_weight ~weight l</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    requires forall a. weight a &gt;= 0</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    ensures y = List.fold_left (fun acc a -&gt; acc + weight a) l *)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="are-formulae-typechecked-by-the-ocaml-compiler">Are formulae typechecked by the OCaml compiler?<a aria-hidden="true" class="hash-link" href="#are-formulae-typechecked-by-the-ocaml-compiler" title="Direct link to heading">â€‹</a></h2><p><strong>No.</strong> The OCaml compiler does not know about Gospel specifications at all, so
it simply ignores them.</p><p><strong>But...</strong> we, however, provide a typechecker for Gospel annotations. It reads
your interface file and performs typechecking and some sanity checks to verify
that your specification is well-formed. You can invoke the Gospel typechecker by
invoking <code>gospel check</code> on your interface file.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="are-formulae-tested-at-runtime">Are formulae tested at runtime?<a aria-hidden="true" class="hash-link" href="#are-formulae-tested-at-runtime" title="Direct link to heading">â€‹</a></h2><p><strong>No.</strong> Gospel does not provide runtime assertion checking for your code, it can
only check if your specifications are well-formed. If you are interested in
runtime assertion checking for your code, you might want to use
<a href="https://github.com/ocaml-gospel/ortac" target="_blank" rel="noopener noreferrer">Ortac</a> on top of Gospel.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="are-formulae-verified-by-gospel">Are formulae verified by Gospel?<a aria-hidden="true" class="hash-link" href="#are-formulae-verified-by-gospel" title="Direct link to heading">â€‹</a></h2><p><strong>No.</strong> Gospel does not feature deductive verification, it can only check if
your specifications are well-formed. External tools will let you
verify Gospel specifications though:</p><ul><li><a href="https://github.com/ocaml-gospel/why3gospel" target="_blank" rel="noopener noreferrer">Why3gospel</a> if your
implementation is written using <a href="http://why3.lri.fr" target="_blank" rel="noopener noreferrer">Why3</a>.</li><li><a href="https://github.com/ocaml-gospel/cameleer" target="_blank" rel="noopener noreferrer">Cameleer</a> if your implementation
is written using OCaml.</li></ul><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-if-i-write-1--0-in-a-formula">What if I write <code>1 / 0</code> in a formula?<a aria-hidden="true" class="hash-link" href="#what-if-i-write-1--0-in-a-formula" title="Direct link to heading">â€‹</a></h2><p><strong>You can.</strong> Indeed, the logic of Gospel is <em>total</em>, which means that
<code>1 / 0</code> is a legal term of type <code>integer</code>. Yet, we do not know its
value, nor if its value is the same as <code>2 / 0</code>. Similarly, we can
access an array out of its bounds but the result is unspecified.</p><p>Using such unspecified terms in specifications is considered bad
practice, and is even likely to be errors in your specifications.
Note that when using runtime assertion checking tools such as
<a href="https://github.com/ocaml-gospel/ortac" target="_blank" rel="noopener noreferrer">Ortac</a>, the evaluation of
terms such as <code>1 / 0</code> will be signaled as a runtime error.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-are-ghost-arguments">What are ghost arguments?<a aria-hidden="true" class="hash-link" href="#what-are-ghost-arguments" title="Direct link to heading">â€‹</a></h2><p>Ghost arguments are function arguments that do not exist in the OCaml interface,
but that you can add to simplify your specification. To understand how they can
be useful and how to use them, you may want to read the <a href="/gospel/walkthroughs/fibonacci">Fibonacci
walk-through</a>.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-are-ghost-types-for">What are ghost types for?<a aria-hidden="true" class="hash-link" href="#what-are-ghost-types-for" title="Direct link to heading">â€‹</a></h2><p>Ghost types do not exist in the original OCaml interface, but you can add some
to simplify your specification by referring to values that have no code
counterpart or are not exposed. You can read the <a href="/gospel/walkthroughs/union-find">Union-find
example</a> to find an example specification using this
feature.</p><hr><h2 class="anchor anchorWithStickyNavbar_31ik" id="why-would-i-need-ghost-values">Why would I need ghost values?<a aria-hidden="true" class="hash-link" href="#why-would-i-need-ghost-values" title="Direct link to heading">â€‹</a></h2><p>Why would you need ghost values, since no code can call them, right? Ghost
values will indeed never be used by programs, as they don&#x27;t even exist in the
code.</p><p>However, consider an interface containing a ghost type, taken as (ghost)
argument by some of your OCaml functions:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ type t *)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> f </span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ y = f [t : t] x</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    pure</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    ... *)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now, every specification that refers to <code>f</code> needs to pass the <code>t</code> argument to
that function. You can propagate that requirement again, but you may also need
to actually instantiate such a value and pass it directly:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> g </span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ y = g x</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    requires let t = make () in</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">             f t x = y *)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Of course, that <code>make</code> function does not exist either, so you also need to
declare it as a ghost value:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ocaml"><pre tabindex="0" class="prism-code language-ocaml codeBlock_23N8 thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ val make : unit -&gt; t *)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#can-i-use-my-ocaml-functions-in-specifications" class="table-of-contents__link toc-highlight">Can I use my OCaml functions in specifications?</a></li><li><a href="#are-formulae-the-same-as-ocaml-boolean-expressions" class="table-of-contents__link toc-highlight">Are formulae the same as OCaml Boolean expressions?</a></li><li><a href="#are-formulae-typechecked-by-the-ocaml-compiler" class="table-of-contents__link toc-highlight">Are formulae typechecked by the OCaml compiler?</a></li><li><a href="#are-formulae-tested-at-runtime" class="table-of-contents__link toc-highlight">Are formulae tested at runtime?</a></li><li><a href="#are-formulae-verified-by-gospel" class="table-of-contents__link toc-highlight">Are formulae verified by Gospel?</a></li><li><a href="#what-if-i-write-1--0-in-a-formula" class="table-of-contents__link toc-highlight">What if I write <code>1 / 0</code> in a formula?</a></li><li><a href="#what-are-ghost-arguments" class="table-of-contents__link toc-highlight">What are ghost arguments?</a></li><li><a href="#what-are-ghost-types-for" class="table-of-contents__link toc-highlight">What are ghost types for?</a></li><li><a href="#why-would-i-need-ghost-values" class="table-of-contents__link toc-highlight">Why would I need ghost values?</a></li></ul></div></div></div></main></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2020â€”2021 Gospel maintainers.</div></div></div></footer></div>
<script src="/gospel/assets/js/runtime~main.e807e826.js"></script>
<script src="/gospel/assets/js/main.c6815175.js"></script>
</body>
</html>